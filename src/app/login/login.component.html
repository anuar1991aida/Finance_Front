<p-toast></p-toast>
<form class="card" [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="bg-success p-2" style="--bs-bg-opacity: .3; width: 100%; height: 100%;">
        <div style="display: flex; flex-direction: row; flex-wrap: nowrap; justify-content: center;">
            <div style="width: 25%;" class="p-fluid">
                <br>
                <br>
                <br>
                <h1 style="display: flex; justify-content: center; text-align: center;position: relative;"
                    class="h3 mb-3 font-weight-normal">Авторизация</h1>
                <div class="p-field" style="padding-bottom: 10px;">
                    <label>Имя пользователя</label>
                    <div class="p-inputgroup">
                        <input type="text" pInputText id="firstname" formControlName="username" />
                    </div>
                    <span class="p-invalid"
                        *ngIf="form.controls['username'].invalid && form.controls['username'].touched">
                        <span *ngIf="form.controls['username'].errors?.required">Логин не должен быть пустым</span>
                    </span>

                </div>

                <div class="p-field" style="padding-bottom: 20px;">
                    <label for="pass">Пароль</label>
                    <p-password id="pass" [toggleMask]="true" [feedback]="false" formControlName="password">
                    </p-password>
                    <span class="p-invalid"
                        *ngIf="form.controls['password'].invalid && form.controls['password'].touched">
                        <span *ngIf="form.controls['password'].errors?.required">Пароль не должен быть пустым</span>
                        <span *ngIf="form.controls['password'].errors?.minlength">Пароль должен содержать минимум
                            {{form.controls['password'].errors?.['minlength']['requiredLength']}}
                            символов.
                            Сейчас {{form.controls['password'].errors?.['minlength']['actualLength']}}.
                        </span>
                    </span>
                </div>

                <div>
                    <button pButton pRipple
                        style="width: 100%; min-height: 100%; display: flex; justify-content: center; text-align: center;position: relative;"
                        type="submit" class="p-button-success" [disabled]="form.invalid || form.disabled">
                        <ng-container *ngIf="!loading">
                            <i class="pi pi-spin pi-cog" style="font-size: 2rem"></i>
                        </ng-container>
                        <ng-container *ngIf="loading">
                            Войти
                        </ng-container>
                    </button>
                </div>
            </div>
        </div>

    </div>
</form>

<p-dialog header="Header" visible="true" [closable]="true" position="bottom" [showHeader]="false"
    [style]="{ width: '150vw' }">
    <div style="display: flex;">

        <div style="width: 90%; text-align: center;" class="mb-3">
            <h2>
                Данная система предназначена только для использования авторизованными пользователями. Использование этой
                системы
                может
                контролироваться и записываться персоналом системы. Любое лицо, использующее данную систему, выражает
                свое
                согласие на
                такой мониторинг и предупреждается, что если такой мониторинг выявит возможные доказательства преступной
                деятельности,
                персонал системы может предоставить доказательства такого мониторинга сотрудникам
                правоохранительных органов.
            </h2>
        </div>
        <div style="width: 10%; vertical-align: middle;" class="mb-3">
            <img style="width: 9rem; height: 9rem" src="./../../../assets/push.png">
        </div>
    </div>

</p-dialog>